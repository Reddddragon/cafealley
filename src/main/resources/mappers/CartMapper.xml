<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  

<mapper namespace="com.spring.cafealley.cart.mapper.ICartMapper">

<!-- 넣었을때는 가장최근값, 없었을때는 시퀀스다음값. -->
<sql id="curr">
<if test="carttype != null and carttype != ''">
	carttype_seq.CURRVAL,
</if>
<if test="carttype == null and carttype = ''">
	carttype_seq.NEXTVAL,
</if> 
 
</sql>

<!-- 장바구니 등록 하기 -->
<insert id="insert">
	INSERT INTO cart(cartno, carttype, prono, userid, cartamount, carttotalprice)
	VALUES(cart_seq.NEXTVAL, <include refid="curr"/> #{prono}, #{userid}, #{cartamount}, #{carttotalprice})
</insert>

<!--  장바구니 찾기 -->
<select id="select" resultType="com.spring.cafealley.command.CartVO">
	SELECT * FROM cart
	WHERE userid = #{userid}
	AND carttype = #{carttype}
</select>


<!--  장바구니 삭제하기 -->
<delete id="delete">
	DELETE FROM cart
	WHERE cartno = #{cartno}
</delete>


	
	

</mapper>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  